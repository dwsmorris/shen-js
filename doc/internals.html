<h1>Shen-js internals</h1>

<h2>Translating to Javascript</h2>

<p>There are several function for translating from different kind of source data
to Javascript code:</p>

<pre><code>(js.from-file Filename)
(js.from-files List-of-filenames)
(js.from-string String)
(js.from-shen List-of-Shen-code)
(js.from-kl List-of-Kl-code)
(js.save-from-files List-of-filenames Target-filename)
</code></pre>

<h2>Interrupting vm</h2>

<p>Shen-js vm can be stopped at some point of time and resumed later. It can be
useful when dealing with asynchronous Javascript tasks:</p>

<pre><code>shen.defun(&quot;xml-http-req&quot;, function(arg) {
  this.interrupt();
  var vm = this;
  xml_http_req(function ondone(result) {
    vm.resume(result);
  }, function onerr(err) {
    vm.resume(vm.fail_obj);
  });
);
</code></pre>

<p>To be used like</p>

<pre><code>(let Data (xml-http-req Url)
  (if (= Data (fail))
      (error &quot;Request failed&quot;)
      (process-response Data)))
</code></pre>
